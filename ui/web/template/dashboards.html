{{ define "dashboards" }}
  <!doctype html>
  <html lang="en">
    <head>
      {{ template "header" }}
      <title>Dashboards</title>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.4.3/echarts.min.js"
        integrity="sha512-EmNxF3E6bM0Xg1zvmkeYD3HDBeGxtsG92IxFt1myNZhXdCav9MzvuH/zNMBU1DmIPN6njrhX1VTbqdJxQ2wHDg=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
      ></script>
    </head>
    <body>
      {{ template "navbar" . }}
      <div class="main-content pt-3">
        <div class="container">
          <div class="row">
            <div class="col-lg-12 mx-auto py-3">
              <button
                type="button"
                class="btn body-button"
                data-bs-toggle="modal"
                data-bs-target="#chartModal"
              >
                Create Line Chart
              </button>
              <div
                class="modal fade"
                id="chartModal"
                tabindex="-1"
                aria-labelledby="chartModalLabel"
                aria-hidden="true"
              >
                <div class="modal-dialog modal-dialog-centered">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="chartModalLabel">Create New Chart</h5>
                      <button
                        type="button"
                        class="btn-close"
                        data-bs-dismiss="modal"
                        aria-label="Close"
                      ></button>
                    </div>
                    <form id="create-chart-form">
                      <div class="modal-body">
                        <div class="mb-3">
                          <label for="title" class="form-label">Title</label>
                          <input
                            type="text"
                            class="form-control"
                            name="title"
                            id="title"
                            placeholder="Enter the chart title"
                          />
                        </div>
                        <div class="mb-3">
                          <label for="channel-id" class="form-label">Channel ID</label>
                          <input
                            type="text"
                            class="form-control mb-3"
                            name="channel"
                            id="channel-id"
                            placeholder="Enter channel ID"
                          />
                        </div>
                        <div class="mb-3">
                          <label for="x-axis" class="form-label">Select x-axis Type</label>
                          <select class="form-select mb-3" name="xAxisType" id="x-axis">
                            <option value="" disabled>Select x-axis Type</option>
                            <option value="value">Value</option>
                            <option value="category">Category</option>
                            <option value="time">Time</option>
                            <option value="log">Log</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label for="y-axis" class="form-label">Select y-axis Type</label>
                          <select class="form-select mb-3" name="yAxisType" id="y-axis">
                            <option value="" disabled>Select y-axis Type</option>
                            <option value="value">Value</option>
                            <option value="category">Category</option>
                            <option value="time">Time</option>
                            <option value="log">Log</option>
                          </select>
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                          Close
                        </button>
                        <button type="submit" class="btn body-button" id="create-chart-button">
                          Create Chart
                        </button>
                      </div>
                    </form>
                  </div>
                </div>
              </div>
              {{ template "linechart" . }}
              {{ template "guage" }}
            </div>
          </div>
        </div>
      </div>
      <script>
        document.getElementById("create-chart-button").addEventListener("click", function () {
          var form = document.getElementById("create-chart-form");
          // Create an object to store the form data
          var formData = {};

          console.log(form.elements);

          // Serialize the form data into the object
          for (var i = 0; i < form.elements.length; i++) {
            var e = form.elements[i];
            if (e.type !== "submit" && e.type !== "button") {
              formData[e.name] = e.value;
            }
          }
          // Retrieve existing chart data from local storage
          var existingChartData = JSON.parse(localStorage.getItem("chartData")) || [];
          console.log(existingChartData);

          // Add the new chart data to the array
          existingChartData.push(formData);
          console.log(existingChartData);

          // Convert the array to JSON and store it in local storage
          localStorage.setItem("chartData", JSON.stringify(existingChartData));

          // var modal = new bootstrap.Modal(document.getElementById("chartModal"));
          // modal.hide();
        });
      </script>
    </body>
  </html>
{{ end }}
